(function(){"use strict";var e={9858:function(e,n,t){var o=t(9242),r=t(3396);function u(e,n,t,o,u,l){const i=(0,r.up)("TitleBar"),a=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(a)],64)}const l={class:"titlebarwraper"},i=["onMousedown","onMouseup"],a={class:"righticons"};var s={setup(e){function n(){window.myapi.minuswindow()}function t(){window.myapi.closewindow()}let u=0,s={x:0,y:0};function c(e){u=1,s={x:e.clientX,y:e.clientY}}function d(){u=0}function m(e){if(console.log(e),u){let n={x:e.clientX-s.x,y:e.clientY-s.y};s={x:e.clientX,y:e.clientY},window.movewindow(window.screenLeft+n.x,window.screenTop+n.y,window.outerWidth,window.outerHeight)}}return(e,u)=>{const s=(0,r.up)("minus"),f=(0,r.up)("el-icon"),p=(0,r.up)("close");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",{class:"titlebar",onMousedown:(0,o.iM)(c,["left"]),onMouseup:(0,o.iM)(d,["left"]),onMousemove:m},null,40,i),(0,r._)("div",a,[(0,r.Wm)(f,{color:"black",class:"no-inherit",style:{"margin-right":"5px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{onClick:n})])),_:1}),(0,r.Wm)(f,{color:"black",class:"no-inherit"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:t})])),_:1})])])}}};const c=s;var d=c,m={name:"App",components:{TitleBar:d}},f=t(89);const p=(0,f.Z)(m,[["render",u]]);var w=p,g=t(4870),v=t(6265),b=t.n(v),h=t(680);const y="X-Token";function k(){return h.Z.get(y)}function _(e){return h.Z.set(y,e)}var W=t(65);const U=(0,W.MT)({state(){return{token:""}},mutations:{setToken(e,n){e.token=n}},getters:{token:e=>e.token}});var x=U,S=t(5574);const O=b().create({baseURL:{NODE_ENV:"production",BASE_URL:"/assets/"}.VUE_APP_BASE_API,timeout:5e3});O.interceptors.request.use((e=>(x.getters.token&&(e.headers["X-Token"]=k()),e)),(e=>(console.log(e),Promise.reject(e)))),O.interceptors.response.use((e=>{const n=e.data;return-1===n.code&&S.z8.error(n.msg?n.msg:"请求出错"),n}));var V=O,j=t(678);const T={id:"loginform"},M=(0,r.Uk)("登录");var E={setup(e){const n=(0,j.tv)(),t=(0,g.qj)({username:"",password:""}),o=()=>{V({method:"post",data:t,url:"/token/"}).then((e=>{e.access&&(x.commit("setToken",e.access),_(e.access),console.log("what a fuck??"),n.push({path:"/register"}))})).catch((()=>S.z8.error("用户名或者密码错误")))};return(e,n)=>{const u=(0,r.up)("el-input"),l=(0,r.up)("el-form-item"),i=(0,r.up)("el-button"),a=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",T,[(0,r.Wm)(a,{model:(0,g.SU)(t)},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"用户名","label-width":"60px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:(0,g.SU)(t).username,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,g.SU)(t).username=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{label:"密码","label-width":"60px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:(0,g.SU)(t).password,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,g.SU)(t).password=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{id:"loginbtn"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:o},{default:(0,r.w5)((()=>[M])),_:1})])),_:1})])),_:1},8,["model"])])}}};const P=E;var C=P;const L={id:"loginform"},A=(0,r.Uk)("登录");var D={setup(e){const n=(0,g.qj)({username:"",password:""}),t=()=>{console.log("submit!")};return(e,o)=>{const u=(0,r.up)("el-input"),l=(0,r.up)("el-form-item"),i=(0,r.up)("el-button"),a=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",L,[(0,r.Wm)(a,{model:(0,g.SU)(n)},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"registerrrrrrrrrrrrrrrr","label-width":"60px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:(0,g.SU)(n).username,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,g.SU)(n).username=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{label:"密码","label-width":"60px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:(0,g.SU)(n).password,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,g.SU)(n).password=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{id:"loginbtn"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:t},{default:(0,r.w5)((()=>[A])),_:1})])),_:1})])),_:1},8,["model"])])}}};const X=D;var B=X;const Y=[{path:"/",component:C,name:"Login"},{path:"/register",component:B,name:"Register"}],Z=(0,j.p7)({history:(0,j.r5)(),routes:Y});Z.beforeEach(((e,n,t)=>(console.log("before route!!!!!"),console.log("t",x.getters.token),"Login"===e.name||x.getters.token?t():t({name:"Login"}),!1)));var q=t(7127),R=(t(4415),t(3586));const z=(0,o.ri)(w);Object.keys(R).forEach((e=>{z.component(e,R[e])})),z.use(Z),z.use(q.Z),z.use(x),z.mount("#app")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var u=n[o]={exports:{}};return e[o].call(u.exports,u,u.exports,t),u.exports}t.m=e,function(){var e=[];t.O=function(n,o,r,u){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],u=e[c][2];for(var i=!0,a=0;a<o.length;a++)(!1&u||l>=u)&&Object.keys(t.O).every((function(e){return t.O[e](o[a])}))?o.splice(a--,1):(i=!1,u<l&&(l=u));if(i){e.splice(c--,1);var s=r();void 0!==s&&(n=s)}}return n}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[o,r,u]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var r,u,l=o[0],i=o[1],a=o[2],s=0;if(l.some((function(n){return 0!==e[n]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(a)var c=a(t)}for(n&&n(o);s<l.length;s++)u=l[s],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(c)},o=self["webpackChunkfanxing"]=self["webpackChunkfanxing"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(9858)}));o=t.O(o)})();
//# sourceMappingURL=app.ea9dc2ad.js.map